#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo 'ğŸ¨ Checking code format...'
pnpm format:check ||
(
  echo 'ğŸ’„ Prettier check failed. Fixing...'
  pnpm format
  echo 'ğŸ›‘ Format fixed. Commit canceled â€” please verify and try again.'
  false
)

echo 'ğŸ§¹ Running ESLint check...'
pnpm lint:check ||
(
  echo 'ğŸ›  ESLint check failed. Auto-fixing...'
  pnpm lint
  echo 'ğŸ›‘ ESLint fixed. Commit canceled â€” please verify and try again.'
  false
)

echo 'ğŸ§  TypeScript check...'
pnpm types:check ||
(
  echo 'ğŸ¤¯ TypeScript errors detected!'
  false
)

echo 'âœ… All checks passed! You may now commit ğŸš€'
